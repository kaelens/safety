{"ast":null,"code":"'use strict';\n\nconst util = require('util');\n\nconst fixOwner = require('./fix-owner');\n\nconst path = require('path');\n\nconst rimraf = util.promisify(require('rimraf'));\n\nconst uniqueFilename = require('unique-filename');\n\nconst {\n  disposer\n} = require('./disposer');\n\nmodule.exports.mkdir = mktmpdir;\n\nfunction mktmpdir(cache, opts = {}) {\n  const {\n    tmpPrefix\n  } = opts;\n  const tmpTarget = uniqueFilename(path.join(cache, 'tmp'), tmpPrefix);\n  return fixOwner.mkdirfix(cache, tmpTarget).then(() => {\n    return tmpTarget;\n  });\n}\n\nmodule.exports.withTmp = withTmp;\n\nfunction withTmp(cache, opts, cb) {\n  if (!cb) {\n    cb = opts;\n    opts = {};\n  }\n\n  return disposer(mktmpdir(cache, opts), rimraf, cb);\n}\n\nmodule.exports.fix = fixtmpdir;\n\nfunction fixtmpdir(cache) {\n  return fixOwner(cache, path.join(cache, 'tmp'));\n}","map":{"version":3,"sources":["/Users/kaelen/nsc-mds/node_modules/npm/node_modules/cacache/lib/util/tmp.js"],"names":["util","require","fixOwner","path","rimraf","promisify","uniqueFilename","disposer","module","exports","mkdir","mktmpdir","cache","opts","tmpPrefix","tmpTarget","join","mkdirfix","then","withTmp","cb","fix","fixtmpdir"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAEA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,aAAD,CAAxB;;AACA,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMG,MAAM,GAAGJ,IAAI,CAACK,SAAL,CAAeJ,OAAO,CAAC,QAAD,CAAtB,CAAf;;AACA,MAAMK,cAAc,GAAGL,OAAO,CAAC,iBAAD,CAA9B;;AACA,MAAM;AAAEM,EAAAA;AAAF,IAAeN,OAAO,CAAC,YAAD,CAA5B;;AAEAO,MAAM,CAACC,OAAP,CAAeC,KAAf,GAAuBC,QAAvB;;AAEA,SAASA,QAAT,CAAmBC,KAAnB,EAA0BC,IAAI,GAAG,EAAjC,EAAqC;AACnC,QAAM;AAAEC,IAAAA;AAAF,MAAgBD,IAAtB;AACA,QAAME,SAAS,GAAGT,cAAc,CAACH,IAAI,CAACa,IAAL,CAAUJ,KAAV,EAAiB,KAAjB,CAAD,EAA0BE,SAA1B,CAAhC;AACA,SAAOZ,QAAQ,CAACe,QAAT,CAAkBL,KAAlB,EAAyBG,SAAzB,EAAoCG,IAApC,CAAyC,MAAM;AACpD,WAAOH,SAAP;AACD,GAFM,CAAP;AAGD;;AAEDP,MAAM,CAACC,OAAP,CAAeU,OAAf,GAAyBA,OAAzB;;AAEA,SAASA,OAAT,CAAkBP,KAAlB,EAAyBC,IAAzB,EAA+BO,EAA/B,EAAmC;AACjC,MAAI,CAACA,EAAL,EAAS;AACPA,IAAAA,EAAE,GAAGP,IAAL;AACAA,IAAAA,IAAI,GAAG,EAAP;AACD;;AACD,SAAON,QAAQ,CAACI,QAAQ,CAACC,KAAD,EAAQC,IAAR,CAAT,EAAwBT,MAAxB,EAAgCgB,EAAhC,CAAf;AACD;;AAEDZ,MAAM,CAACC,OAAP,CAAeY,GAAf,GAAqBC,SAArB;;AAEA,SAASA,SAAT,CAAoBV,KAApB,EAA2B;AACzB,SAAOV,QAAQ,CAACU,KAAD,EAAQT,IAAI,CAACa,IAAL,CAAUJ,KAAV,EAAiB,KAAjB,CAAR,CAAf;AACD","sourcesContent":["'use strict'\n\nconst util = require('util')\n\nconst fixOwner = require('./fix-owner')\nconst path = require('path')\nconst rimraf = util.promisify(require('rimraf'))\nconst uniqueFilename = require('unique-filename')\nconst { disposer } = require('./disposer')\n\nmodule.exports.mkdir = mktmpdir\n\nfunction mktmpdir (cache, opts = {}) {\n  const { tmpPrefix } = opts\n  const tmpTarget = uniqueFilename(path.join(cache, 'tmp'), tmpPrefix)\n  return fixOwner.mkdirfix(cache, tmpTarget).then(() => {\n    return tmpTarget\n  })\n}\n\nmodule.exports.withTmp = withTmp\n\nfunction withTmp (cache, opts, cb) {\n  if (!cb) {\n    cb = opts\n    opts = {}\n  }\n  return disposer(mktmpdir(cache, opts), rimraf, cb)\n}\n\nmodule.exports.fix = fixtmpdir\n\nfunction fixtmpdir (cache) {\n  return fixOwner(cache, path.join(cache, 'tmp'))\n}\n"]},"metadata":{},"sourceType":"script"}