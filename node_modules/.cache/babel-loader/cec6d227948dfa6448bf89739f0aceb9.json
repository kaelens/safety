{"ast":null,"code":"var fs = require('fs');\n\nvar glob = require('glob');\n\nvar path = require('path');\n\nvar validateLicense = require('validate-npm-package-license');\n\nvar validateName = require('validate-npm-package-name');\n\nvar npa = require('npm-package-arg');\n\nvar semver = require('semver'); // more popular packages should go here, maybe?\n\n\nfunction isTestPkg(p) {\n  return !!p.match(/^(expresso|mocha|tap|coffee-script|coco|streamline)$/);\n}\n\nfunction niceName(n) {\n  return n.replace(/^node-|[.-]js$/g, '').replace(' ', '-').toLowerCase();\n}\n\nfunction readDeps(test, excluded) {\n  return function (cb) {\n    fs.readdir('node_modules', function (er, dir) {\n      if (er) return cb();\n      var deps = {};\n      var n = dir.length;\n      if (n === 0) return cb(null, deps);\n      dir.forEach(function (d) {\n        if (d.match(/^\\./)) return next();\n        if (test !== isTestPkg(d) || excluded[d]) return next();\n        var dp = path.join(dirname, 'node_modules', d, 'package.json');\n        fs.readFile(dp, 'utf8', function (er, p) {\n          if (er) return next();\n\n          try {\n            p = JSON.parse(p);\n          } catch (e) {\n            return next();\n          }\n\n          if (!p.version) return next();\n\n          if (p._requiredBy) {\n            if (!p._requiredBy.some(function (req) {\n              return req === '#USER';\n            })) return next();\n          }\n\n          deps[d] = config.get('save-exact') ? p.version : config.get('save-prefix') + p.version;\n          return next();\n        });\n      });\n\n      function next() {\n        if (--n === 0) return cb(null, deps);\n      }\n    });\n  };\n}\n\nvar name = package.name || basename;\nvar spec;\n\ntry {\n  spec = npa(name);\n} catch (e) {\n  spec = {};\n}\n\nvar scope = config.get('scope');\n\nif (scope) {\n  if (scope.charAt(0) !== '@') scope = '@' + scope;\n\n  if (spec.scope) {\n    name = scope + '/' + spec.name.split('/')[1];\n  } else {\n    name = scope + '/' + name;\n  }\n}\n\nexports.name = yes ? name : prompt('package name', niceName(name), function (data) {\n  var its = validateName(data);\n  if (its.validForNewPackages) return data;\n  var errors = (its.errors || []).concat(its.warnings || []);\n  var er = new Error('Sorry, ' + errors.join(' and ') + '.');\n  er.notValid = true;\n  return er;\n});\nconst defaultDottedInitVersion = config && config.defaults && config.defaults['init.version'];\nconst dottedInitVersion = config.get('init.version') !== defaultDottedInitVersion && config.get('init.version');\nvar version = package.version || dottedInitVersion || config.get('init-version') || '1.0.0';\nexports.version = yes ? version : prompt('version', version, function (version) {\n  if (semver.valid(version)) return version;\n  var er = new Error('Invalid version: \"' + version + '\"');\n  er.notValid = true;\n  return er;\n});\n\nif (!package.description) {\n  exports.description = yes ? '' : prompt('description');\n}\n\nif (!package.main) {\n  exports.main = function (cb) {\n    fs.readdir(dirname, function (er, f) {\n      if (er) f = [];\n      f = f.filter(function (f) {\n        return f.match(/\\.js$/);\n      });\n      if (f.indexOf('index.js') !== -1) f = 'index.js';else if (f.indexOf('main.js') !== -1) f = 'main.js';else if (f.indexOf(basename + '.js') !== -1) f = basename + '.js';else f = f[0];\n      var index = f || 'index.js';\n      return cb(null, yes ? index : prompt('entry point', index));\n    });\n  };\n}\n\nif (!package.bin) {\n  exports.bin = function (cb) {\n    fs.readdir(path.resolve(dirname, 'bin'), function (er, d) {\n      // no bins\n      if (er) return cb(); // just take the first js file we find there, or nada\n\n      return cb(null, d.filter(function (f) {\n        return f.match(/\\.js$/);\n      })[0]);\n    });\n  };\n}\n\nexports.directories = function (cb) {\n  fs.readdir(dirname, function (er, dirs) {\n    if (er) return cb(er);\n    var res = {};\n    dirs.forEach(function (d) {\n      switch (d) {\n        case 'example':\n        case 'examples':\n          return res.example = d;\n\n        case 'test':\n        case 'tests':\n          return res.test = d;\n\n        case 'doc':\n        case 'docs':\n          return res.doc = d;\n\n        case 'man':\n          return res.man = d;\n\n        case 'lib':\n          return res.lib = d;\n      }\n    });\n    if (Object.keys(res).length === 0) res = undefined;\n    return cb(null, res);\n  });\n};\n\nif (!package.dependencies) {\n  exports.dependencies = readDeps(false, package.devDependencies || {});\n}\n\nif (!package.devDependencies) {\n  exports.devDependencies = readDeps(true, package.dependencies || {});\n} // MUST have a test script!\n\n\nvar s = package.scripts || {};\nvar notest = 'echo \"Error: no test specified\" && exit 1';\n\nif (!package.scripts) {\n  exports.scripts = function (cb) {\n    fs.readdir(path.join(dirname, 'node_modules'), function (er, d) {\n      setupScripts(d || [], cb);\n    });\n  };\n}\n\nfunction setupScripts(d, cb) {\n  // check to see what framework is in use, if any\n  function tx(test) {\n    return test || notest;\n  }\n\n  if (!s.test || s.test === notest) {\n    var commands = {\n      'tap': 'tap test/*.js',\n      'expresso': 'expresso test',\n      'mocha': 'mocha'\n    };\n    var command;\n    Object.keys(commands).forEach(function (k) {\n      if (d.indexOf(k) !== -1) command = commands[k];\n    });\n    var ps = 'test command';\n\n    if (yes) {\n      s.test = command || notest;\n    } else {\n      s.test = command ? prompt(ps, command, tx) : prompt(ps, tx);\n    }\n  }\n\n  return cb(null, s);\n}\n\nif (!package.repository) {\n  exports.repository = function (cb) {\n    fs.readFile('.git/config', 'utf8', function (er, gconf) {\n      if (er || !gconf) {\n        return cb(null, yes ? '' : prompt('git repository'));\n      }\n\n      gconf = gconf.split(/\\r?\\n/);\n      var i = gconf.indexOf('[remote \"origin\"]');\n\n      if (i !== -1) {\n        var u = gconf[i + 1];\n        if (!u.match(/^\\s*url =/)) u = gconf[i + 2];\n        if (!u.match(/^\\s*url =/)) u = null;else u = u.replace(/^\\s*url = /, '');\n      }\n\n      if (u && u.match(/^git@github.com:/)) u = u.replace(/^git@github.com:/, 'https://github.com/');\n      return cb(null, yes ? u : prompt('git repository', u));\n    });\n  };\n}\n\nif (!package.keywords) {\n  exports.keywords = yes ? '' : prompt('keywords', function (s) {\n    if (!s) return undefined;\n    if (Array.isArray(s)) s = s.join(' ');\n    if (typeof s !== 'string') return s;\n    return s.split(/[\\s,]+/);\n  });\n}\n\nif (!package.author) {\n  exports.author = config.get('init.author.name') || config.get('init-author-name') ? {\n    \"name\": config.get('init.author.name') || config.get('init-author-name'),\n    \"email\": config.get('init.author.email') || config.get('init-author-email'),\n    \"url\": config.get('init.author.url') || config.get('init-author-url')\n  } : yes ? '' : prompt('author');\n}\n\nconst defaultDottedInitLicense = config && config.defaults && config.defaults['init.license'];\nconst dottedInitLicense = config.get('init.license') !== defaultDottedInitLicense && config.get('init.license');\nvar license = package.license || dottedInitLicense || config.get('init-license') || 'ISC';\nexports.license = yes ? license : prompt('license', license, function (data) {\n  var its = validateLicense(data);\n  if (its.validForNewPackages) return data;\n  var errors = (its.errors || []).concat(its.warnings || []);\n  var er = new Error('Sorry, ' + errors.join(' and ') + '.');\n  er.notValid = true;\n  return er;\n});","map":{"version":3,"sources":["/Users/kaelen/nsc-mds/node_modules/npm/node_modules/init-package-json/default-input.js"],"names":["fs","require","glob","path","validateLicense","validateName","npa","semver","isTestPkg","p","match","niceName","n","replace","toLowerCase","readDeps","test","excluded","cb","readdir","er","dir","deps","length","forEach","d","next","dp","join","dirname","readFile","JSON","parse","e","version","_requiredBy","some","req","config","get","name","package","basename","spec","scope","charAt","split","exports","yes","prompt","data","its","validForNewPackages","errors","concat","warnings","Error","notValid","defaultDottedInitVersion","defaults","dottedInitVersion","valid","description","main","f","filter","indexOf","index","bin","resolve","directories","dirs","res","example","doc","man","lib","Object","keys","undefined","dependencies","devDependencies","s","scripts","notest","setupScripts","tx","commands","command","k","ps","repository","gconf","i","u","keywords","Array","isArray","author","defaultDottedInitLicense","dottedInitLicense","license"],"mappings":"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","sourcesContent":["var fs = require('fs')\nvar glob = require('glob')\nvar path = require('path')\nvar validateLicense = require('validate-npm-package-license')\nvar validateName = require('validate-npm-package-name')\nvar npa = require('npm-package-arg')\nvar semver = require('semver')\n\n// more popular packages should go here, maybe?\nfunction isTestPkg (p) {\n  return !!p.match(/^(expresso|mocha|tap|coffee-script|coco|streamline)$/)\n}\n\nfunction niceName (n) {\n  return n.replace(/^node-|[.-]js$/g, '').replace(' ', '-').toLowerCase()\n}\n\nfunction readDeps (test, excluded) { return function (cb) {\n  fs.readdir('node_modules', function (er, dir) {\n    if (er) return cb()\n    var deps = {}\n    var n = dir.length\n    if (n === 0) return cb(null, deps)\n    dir.forEach(function (d) {\n      if (d.match(/^\\./)) return next()\n      if (test !== isTestPkg(d) || excluded[d])\n        return next()\n\n      var dp = path.join(dirname, 'node_modules', d, 'package.json')\n      fs.readFile(dp, 'utf8', function (er, p) {\n        if (er) return next()\n        try { p = JSON.parse(p) }\n        catch (e) { return next() }\n        if (!p.version) return next()\n        if (p._requiredBy) {\n          if (!p._requiredBy.some(function (req) { return req === '#USER' })) return next()\n        }\n        deps[d] = config.get('save-exact') ? p.version : config.get('save-prefix') + p.version\n        return next()\n      })\n    })\n    function next () {\n      if (--n === 0) return cb(null, deps)\n    }\n  })\n}}\n\nvar name = package.name || basename\nvar spec\ntry {\n  spec = npa(name)\n} catch (e) {\n  spec = {}\n}\nvar scope = config.get('scope')\nif (scope) {\n  if (scope.charAt(0) !== '@') scope = '@' + scope\n  if (spec.scope) {\n    name = scope + '/' + spec.name.split('/')[1]\n  } else {\n    name = scope + '/' + name\n  }\n}\nexports.name =  yes ? name : prompt('package name', niceName(name), function (data) {\n  var its = validateName(data)\n  if (its.validForNewPackages) return data\n  var errors = (its.errors || []).concat(its.warnings || [])\n  var er = new Error('Sorry, ' + errors.join(' and ') + '.')\n  er.notValid = true\n  return er\n})\n\nconst defaultDottedInitVersion = config &&\n  config.defaults &&\n  config.defaults['init.version']\nconst dottedInitVersion =\n  config.get('init.version') !== defaultDottedInitVersion &&\n  config.get('init.version')\nvar version = package.version ||\n              dottedInitVersion ||\n              config.get('init-version') ||\n              '1.0.0'\nexports.version = yes ?\n  version :\n  prompt('version', version, function (version) {\n    if (semver.valid(version)) return version\n    var er = new Error('Invalid version: \"' + version + '\"')\n    er.notValid = true\n    return er\n  })\n\nif (!package.description) {\n  exports.description = yes ? '' : prompt('description')\n}\n\nif (!package.main) {\n  exports.main = function (cb) {\n    fs.readdir(dirname, function (er, f) {\n      if (er) f = []\n\n      f = f.filter(function (f) {\n        return f.match(/\\.js$/)\n      })\n\n      if (f.indexOf('index.js') !== -1)\n        f = 'index.js'\n      else if (f.indexOf('main.js') !== -1)\n        f = 'main.js'\n      else if (f.indexOf(basename + '.js') !== -1)\n        f = basename + '.js'\n      else\n        f = f[0]\n\n      var index = f ||Â 'index.js'\n      return cb(null, yes ? index : prompt('entry point', index))\n    })\n  }\n}\n\nif (!package.bin) {\n  exports.bin = function (cb) {\n    fs.readdir(path.resolve(dirname, 'bin'), function (er, d) {\n      // no bins\n      if (er) return cb()\n      // just take the first js file we find there, or nada\n      return cb(null, d.filter(function (f) {\n        return f.match(/\\.js$/)\n      })[0])\n    })\n  }\n}\n\nexports.directories = function (cb) {\n  fs.readdir(dirname, function (er, dirs) {\n    if (er) return cb(er)\n    var res = {}\n    dirs.forEach(function (d) {\n      switch (d) {\n        case 'example': case 'examples': return res.example = d\n        case 'test': case 'tests': return res.test = d\n        case 'doc': case 'docs': return res.doc = d\n        case 'man': return res.man = d\n        case 'lib': return res.lib = d\n      }\n    })\n    if (Object.keys(res).length === 0) res = undefined\n    return cb(null, res)\n  })\n}\n\nif (!package.dependencies) {\n  exports.dependencies = readDeps(false, package.devDependencies || {})\n}\n\nif (!package.devDependencies) {\n  exports.devDependencies = readDeps(true, package.dependencies || {})\n}\n\n// MUST have a test script!\nvar s = package.scripts || {}\nvar notest = 'echo \"Error: no test specified\" && exit 1'\nif (!package.scripts) {\n  exports.scripts = function (cb) {\n    fs.readdir(path.join(dirname, 'node_modules'), function (er, d) {\n      setupScripts(d || [], cb)\n    })\n  }\n}\nfunction setupScripts (d, cb) {\n  // check to see what framework is in use, if any\n  function tx (test) {\n    return test || notest\n  }\n  if (!s.test || s.test === notest) {\n    var commands = {\n      'tap':'tap test/*.js'\n    , 'expresso':'expresso test'\n    , 'mocha':'mocha'\n    }\n    var command\n    Object.keys(commands).forEach(function (k) {\n      if (d.indexOf(k) !== -1) command = commands[k]\n    })\n    var ps = 'test command'\n    if (yes) {\n      s.test = command || notest\n    } else {\n      s.test = command ? prompt(ps, command, tx) : prompt(ps, tx)\n    }\n  }\n  return cb(null, s)\n}\n\nif (!package.repository) {\n  exports.repository = function (cb) {\n    fs.readFile('.git/config', 'utf8', function (er, gconf) {\n      if (er || !gconf) {\n        return cb(null, yes ? '' : prompt('git repository'))\n      }\n      gconf = gconf.split(/\\r?\\n/)\n      var i = gconf.indexOf('[remote \"origin\"]')\n      if (i !== -1) {\n        var u = gconf[i + 1]\n        if (!u.match(/^\\s*url =/)) u = gconf[i + 2]\n        if (!u.match(/^\\s*url =/)) u = null\n        else u = u.replace(/^\\s*url = /, '')\n      }\n      if (u && u.match(/^git@github.com:/))\n        u = u.replace(/^git@github.com:/, 'https://github.com/')\n\n      return cb(null, yes ? u : prompt('git repository', u))\n    })\n  }\n}\n\nif (!package.keywords) {\n  exports.keywords = yes ? '' : prompt('keywords', function (s) {\n    if (!s) return undefined\n    if (Array.isArray(s)) s = s.join(' ')\n    if (typeof s !== 'string') return s\n    return s.split(/[\\s,]+/)\n  })\n}\n\nif (!package.author) {\n  exports.author = config.get('init.author.name') ||\n                   config.get('init-author-name')\n  ? {\n      \"name\" : config.get('init.author.name') ||\n               config.get('init-author-name'),\n      \"email\" : config.get('init.author.email') ||\n                config.get('init-author-email'),\n      \"url\" : config.get('init.author.url') ||\n              config.get('init-author-url')\n    }\n  : yes ? '' : prompt('author')\n}\n\nconst defaultDottedInitLicense = config &&\n  config.defaults &&\n  config.defaults['init.license']\nconst dottedInitLicense =\n  config.get('init.license') !== defaultDottedInitLicense &&\n  config.get('init.license')\nvar license = package.license ||\n              dottedInitLicense ||\n              config.get('init-license') ||\n              'ISC'\nexports.license = yes ? license : prompt('license', license, function (data) {\n  var its = validateLicense(data)\n  if (its.validForNewPackages) return data\n  var errors = (its.errors || []).concat(its.warnings || [])\n  var er = new Error('Sorry, ' + errors.join(' and ') + '.')\n  er.notValid = true\n  return er\n})\n"]},"metadata":{},"sourceType":"script"}